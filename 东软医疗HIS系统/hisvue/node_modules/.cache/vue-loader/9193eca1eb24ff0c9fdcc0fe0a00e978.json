{"remainingRequest":"C:\\Users\\Surface\\Desktop\\hisvue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Surface\\Desktop\\hisvue\\src\\views\\sys\\constant.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Surface\\Desktop\\hisvue\\src\\views\\sys\\constant.vue","mtime":1602230683752},{"path":"C:\\Users\\Surface\\Desktop\\hisvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600741744315},{"path":"C:\\Users\\Surface\\Desktop\\hisvue\\node_modules\\babel-loader\\lib\\index.js","mtime":1600741744010},{"path":"C:\\Users\\Surface\\Desktop\\hisvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600741744315},{"path":"C:\\Users\\Surface\\Desktop\\hisvue\\node_modules\\vue-loader\\lib\\index.js","mtime":1600741754219}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tpageInfo: {\n\t\t\t\tpageNum: 1,\n\t\t\t\tpageSize: 5\n\t\t\t},\n\t\t\tkeyword: \"\",\n\t\t\ttype: {},\n\t\t\tdisableAddTypeDialog: false,\n\t\t\tdisableItemDialog: false,\n\t\t\ttypelist: [],\n\t\t\tparams: {},\n\t\t\titemPageInfo: {},\n\t\t\tids:[]\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.showData(1, this.pageInfo.pageSize, this.keyword)\n\t},\n\tmethods: {\n\t\tshowData(pageNum, pageSize, keyword) {\n\t\t\tlet url = \"constantType/getPaged\";\n\t\t\tlet params = `pageNum=${pageNum}&pageSize=${pageSize}&keyword=${keyword}`;\n\t\t\taxios.post(url, params).then(resp => {\n\t\t\t\tthis.pageInfo = resp.data.data;\n\t\t\t});\n\t\t},\n\t\thandleCurrentChange(pageNum) {\n\t\t\tthis.showData(pageNum, this.pageInfo.pageSize, this.keyword);\n\n\t\t},\n\t\thandleSizeChange(pageSize) {\n\t\t\tthis.showData(1, pageSize, this.keyword);\n\t\t\tthis.pageInfo.pageSize = pageSize;\n\t\t},\n\t\tsearch() {\n\t\t\tthis.showData(1, this.pageInfo.pageSize, this.keyword)\n\t\t},\n\t\thandleTypeEdit(scope) {\n\t\t\tthis.$set(scope.row, \"edit\", true);\n\t\t\tthis.type = { ...scope.row\n\t\t\t}\n\t\t},\n\t\thandleTypeSave(scope) {\n\t\t\tlet url = \"constantType/update\";\n\t\t\taxios.post(url, this.type).then(resp => {\n\t\t\t\tif (resp.data.data == 1) {\n\t\t\t\t\tscope.row.edit = false;\n\t\t\t\t\tscope.row.constanttypecode = this.type.constanttypecode;\n\t\t\t\t\tscope.row.constanttypename = this.type.constanttypename;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\thandleTypeDel(scope) {\n\t\t\tthis.$confirm(\"是否删除？\", \"提示\").then(() => {\n\t\t\t\tlet url = \"constantType/delete\";\n\t\t\t\taxios.post(url, `id=${scope.row.id}`).then(resp => {\n\t\t\t\t\tif (resp.data.data == 1) {\n\t\t\t\t\t\tthis.$alert(\"删除成功！\");\n\t\t\t\t\t\tthis.showData(this.pageInfo.pageNum, this.pageInfo.pageSize, this.keyword);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.log(err)\n\t\t\t});\n\t\t},\n\t\thandleInsert() {\n\t\t\tlet url = \"constantType/insert\";\n\t\t\taxios.post(url, this.type).then(resp => {\n\t\t\t\tif (resp.data.data == 1) {\n\t\t\t\t\tthis.showData(this.pageInfo.navigateLastPage, this.pageInfo.pageSize, this.keyword);\n\t\t\t\t\tthis.disableAddTypeDialog = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.type = {};\n\t\t},\n\t\thandleItemManage() {\n\t\t\tthis.disableItemDialog = true;\n\t\t\tlet url = \"constantType/getAll\";\n\t\t\taxios.post(url).then(resp => {\n\t\t\t\tthis.typelist = resp.data.data;\n\t\t\t});\n\t\t},\n\t\tsearchItem() {\n\t\t\tthis.showItemData(1,5);\n\t\t},\n\t\tshowItemData(pageNum, pageSize) {\n\t\t\tlet url = \"constantItem/getPaged\";\n\t\t\tthis.params = {...this.params,pageNum:pageNum,pageSize:pageSize};\n\t\t\taxios.post(url,this.params).then(resp => {\n\t\t\t\tthis.itemPageInfo = resp.data.data;\n\t\t\t});\n\t\t},\n\t\thandleItemCurrentChange(pageNum) {\n\t\t\tthis.showItemData(pageNum,this.itemPageInfo.pageSize);\n\t\t},\n\t\thandleItemSizeChange(pageSize){\n\t\t\tthis.showItemData(1,pageSize);\n\t\t},\n\t\thandleSelectionChange(item){\n\t\t\tthis.ids = item.map(o=>o.id);\n\t\t},\n\t\tbatchDelete(){\n\t\t\tthis.$confirm(\"是否删除？\",\"提示\").then(()=>{\n\t\t\t\tlet url = \"constantItem/batchDelete\";\n\t\t\t\taxios.post(url,this.ids).then(resp=>{\n\t\t\t\t\tif(resp.data.data > 0){\n\t\t\t\t\t\tthis.$alert(\"删除成功！\");\n\t\t\t\t\t\tthis.showItemData(1,this.itemPageInfo.pageSize);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).catch(err=>{\n\t\t\t\tthis.$alert(err);\n\t\t\t});\n\t\t}\n\t}\n}\n",{"version":3,"sources":["constant.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"constant.vue","sourceRoot":"src/views/sys","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-form :inline=\"true\" size=\"mini\">\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-input v-model=\"keyword\" placeholder=\"请输入常量类别编码和名称\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"search\">查询常量类别</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"disableAddTypeDialog = true\">新增常量类别</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"handleItemManage\">常数项管理</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t\t<el-table :data=\"pageInfo.list\" style=\"100%\">\r\n\t\t\t<el-table-column label=\"编号\" prop=\"id\" width=\"80\"></el-table-column>\r\n\t\t\t<el-table-column label=\"代码\" width=\"200\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<template v-if=\"scope.row.edit\">\r\n\t\t\t\t\t\t<el-input v-model=\"type.constanttypecode\" size=\"mini\"></el-input>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<span>{{scope.row.constanttypecode}}</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"名称\" width=\"120\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<template v-if=\"scope.row.edit\">\r\n\t\t\t\t\t\t<el-input v-model=\"type.constanttypename\" size=\"mini\"></el-input>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<span>{{scope.row.constanttypename}}</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"操作\" width=\"180\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<template v-if=\"scope.row.edit\">\r\n\t\t\t\t\t\t<el-button @click=\"handleTypeSave(scope)\" size=\"mini\" type=\"primary\">保存</el-button>\r\n\t\t\t\t\t\t<el-button size=\"mini\" @click=\"scope.row.edit=false\" type=\"danger\">取消</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<el-button @click=\"handleTypeEdit(scope)\" size=\"mini\" type=\"primary\">编辑</el-button>\r\n\t\t\t\t\t\t<el-button size=\"mini\" @click=\"handleTypeDel(scope)\" type=\"danger\">删除</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\t\t<el-pagination layout=\"prev,pager,next,total,jumper,sizes\" :total=\"pageInfo.total\" :page-size=\"pageInfo.pageSize\"\r\n\t\t :page-count=\"pageInfo.navigatePages\" :page-sizes=\"[5,10,15,20]\" :current-page=\"pageInfo.pageNum\" background\r\n\t\t @current-change=\"handleCurrentChange\" @size-change=\"handleSizeChange\"></el-pagination>\r\n\r\n\t\t<el-dialog :visible.sync=\"disableAddTypeDialog\" title=\"新增常数类别\" center>\r\n\t\t\t<el-form :inline=\"true\" align=\"center\" size=\"mini\">\r\n\t\t\t\t<el-form-item label=\"常数类别编码:\">\r\n\t\t\t\t\t<el-input v-model=\"type.constanttypecode\" placeholder=\"常数类别编码\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"常数类别名称:\">\r\n\t\t\t\t\t<el-input v-model=\"type.constanttypename\" placeholder=\"常数类别名称\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-button @click=\"handleInsert()\" type=\"primary\">保存</el-button>\r\n\t\t\t\t\t<el-button type=\"danger\" @click=\"disableAddTypeDialog=false\">取消</el-button>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t</el-dialog>\r\n\t\t<el-dialog :visible.sync=\"disableItemDialog\" title=\"常数项列表\" center width=\"850px\">\r\n\t\t\t<el-form :inline=\"true\" align=\"center\" size=\"mini\">\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-input placeholder=\"请输入常量类别编码和名称\" v-model=\"params.CodeOrName\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<template>\r\n\t\t\t\t\t\t<el-select placeholder=\"所属分类\" v-model=\"params.typeId\">\r\n\t\t\t\t\t\t\t<el-option v-for=\"type in typelist\" :key=\"type.id\" :label=\"type.constanttypename\" :value=\"type.id\">\r\n\t\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"searchItem()\">查询常量类别</el-button>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"disableAddTypeDialog = true\">新增常量类别</el-button>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<hr />\r\n\t\t\t<el-table :data=\"itemPageInfo.list\" @selection-change=\"handleSelectionChange\">\r\n\t\t\t\t<el-table-column type=\"selection\">\r\n\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"编码\" width=\"80\" prop=\"code\">\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"名称\" width=\"200\" prop=\"name\">\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"类别\" width=\"120\" prop=\"type.constanttypename\">\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"ID\" width=\"120\" prop=\"id\">\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" width=\"180\">\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<el-pagination :total=\"itemPageInfo.total\" :page-count=\"itemPageInfo.nevigatePages\" :page-size=\"itemPageInfo.pageSize\"\r\n\t\t\t :current-page=\"itemPageInfo.pageNum\" :page-sizes=\"[5,10,15,20]\" layout=\"prev,pager,next,total,jumper,sizes\"\r\n\t\t\t background @current-change=\"handleItemCurrentChange\" @size-change=\"handleItemSizeChange\"></el-pagination>\r\n\t\t\t<br>\r\n\t\t\t<el-form style=\"text-align: center;\">\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-button type=\"danger\" :disabled=\"ids.length==0\" @click=\"batchDelete\">批量删除</el-button>\r\n\t\t\t\t\t<el-button @click=\"disableItemDialog = false\">关闭</el-button>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tpageInfo: {\r\n\t\t\t\t\tpageNum: 1,\r\n\t\t\t\t\tpageSize: 5\r\n\t\t\t\t},\r\n\t\t\t\tkeyword: \"\",\r\n\t\t\t\ttype: {},\r\n\t\t\t\tdisableAddTypeDialog: false,\r\n\t\t\t\tdisableItemDialog: false,\r\n\t\t\t\ttypelist: [],\r\n\t\t\t\tparams: {},\r\n\t\t\t\titemPageInfo: {},\r\n\t\t\t\tids:[]\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.showData(1, this.pageInfo.pageSize, this.keyword)\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tshowData(pageNum, pageSize, keyword) {\r\n\t\t\t\tlet url = \"constantType/getPaged\";\r\n\t\t\t\tlet params = `pageNum=${pageNum}&pageSize=${pageSize}&keyword=${keyword}`;\r\n\t\t\t\taxios.post(url, params).then(resp => {\r\n\t\t\t\t\tthis.pageInfo = resp.data.data;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(pageNum) {\r\n\t\t\t\tthis.showData(pageNum, this.pageInfo.pageSize, this.keyword);\r\n\r\n\t\t\t},\r\n\t\t\thandleSizeChange(pageSize) {\r\n\t\t\t\tthis.showData(1, pageSize, this.keyword);\r\n\t\t\t\tthis.pageInfo.pageSize = pageSize;\r\n\t\t\t},\r\n\t\t\tsearch() {\r\n\t\t\t\tthis.showData(1, this.pageInfo.pageSize, this.keyword)\r\n\t\t\t},\r\n\t\t\thandleTypeEdit(scope) {\r\n\t\t\t\tthis.$set(scope.row, \"edit\", true);\r\n\t\t\t\tthis.type = { ...scope.row\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleTypeSave(scope) {\r\n\t\t\t\tlet url = \"constantType/update\";\r\n\t\t\t\taxios.post(url, this.type).then(resp => {\r\n\t\t\t\t\tif (resp.data.data == 1) {\r\n\t\t\t\t\t\tscope.row.edit = false;\r\n\t\t\t\t\t\tscope.row.constanttypecode = this.type.constanttypecode;\r\n\t\t\t\t\t\tscope.row.constanttypename = this.type.constanttypename;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleTypeDel(scope) {\r\n\t\t\t\tthis.$confirm(\"是否删除？\", \"提示\").then(() => {\r\n\t\t\t\t\tlet url = \"constantType/delete\";\r\n\t\t\t\t\taxios.post(url, `id=${scope.row.id}`).then(resp => {\r\n\t\t\t\t\t\tif (resp.data.data == 1) {\r\n\t\t\t\t\t\t\tthis.$alert(\"删除成功！\");\r\n\t\t\t\t\t\t\tthis.showData(this.pageInfo.pageNum, this.pageInfo.pageSize, this.keyword);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleInsert() {\r\n\t\t\t\tlet url = \"constantType/insert\";\r\n\t\t\t\taxios.post(url, this.type).then(resp => {\r\n\t\t\t\t\tif (resp.data.data == 1) {\r\n\t\t\t\t\t\tthis.showData(this.pageInfo.navigateLastPage, this.pageInfo.pageSize, this.keyword);\r\n\t\t\t\t\t\tthis.disableAddTypeDialog = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.type = {};\r\n\t\t\t},\r\n\t\t\thandleItemManage() {\r\n\t\t\t\tthis.disableItemDialog = true;\r\n\t\t\t\tlet url = \"constantType/getAll\";\r\n\t\t\t\taxios.post(url).then(resp => {\r\n\t\t\t\t\tthis.typelist = resp.data.data;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsearchItem() {\r\n\t\t\t\tthis.showItemData(1,5);\r\n\t\t\t},\r\n\t\t\tshowItemData(pageNum, pageSize) {\r\n\t\t\t\tlet url = \"constantItem/getPaged\";\r\n\t\t\t\tthis.params = {...this.params,pageNum:pageNum,pageSize:pageSize};\r\n\t\t\t\taxios.post(url,this.params).then(resp => {\r\n\t\t\t\t\tthis.itemPageInfo = resp.data.data;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleItemCurrentChange(pageNum) {\r\n\t\t\t\tthis.showItemData(pageNum,this.itemPageInfo.pageSize);\r\n\t\t\t},\r\n\t\t\thandleItemSizeChange(pageSize){\r\n\t\t\t\tthis.showItemData(1,pageSize);\r\n\t\t\t},\r\n\t\t\thandleSelectionChange(item){\r\n\t\t\t\tthis.ids = item.map(o=>o.id);\r\n\t\t\t},\r\n\t\t\tbatchDelete(){\r\n\t\t\t\tthis.$confirm(\"是否删除？\",\"提示\").then(()=>{\r\n\t\t\t\t\tlet url = \"constantItem/batchDelete\";\r\n\t\t\t\t\taxios.post(url,this.ids).then(resp=>{\r\n\t\t\t\t\t\tif(resp.data.data > 0){\r\n\t\t\t\t\t\t\tthis.$alert(\"删除成功！\");\r\n\t\t\t\t\t\t\tthis.showItemData(1,this.itemPageInfo.pageSize);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tthis.$alert(err);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\n"]}]}