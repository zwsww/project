{"remainingRequest":"C:\\Users\\Surface\\Desktop\\p\\东软医疗HIS系统\\hisvue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Surface\\Desktop\\p\\东软医疗HIS系统\\hisvue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Surface\\Desktop\\p\\东软医疗HIS系统\\hisvue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Surface\\Desktop\\p\\东软医疗HIS系统\\hisvue\\src\\views\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Surface\\Desktop\\p\\东软医疗HIS系统\\hisvue\\src\\views\\login.vue","mtime":1602204762307},{"path":"C:\\Users\\Surface\\Desktop\\p\\东软医疗HIS系统\\hisvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600741744315},{"path":"C:\\Users\\Surface\\Desktop\\p\\东软医疗HIS系统\\hisvue\\node_modules\\babel-loader\\lib\\index.js","mtime":1600741744010},{"path":"C:\\Users\\Surface\\Desktop\\p\\东软医疗HIS系统\\hisvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600741744315},{"path":"C:\\Users\\Surface\\Desktop\\p\\东软医疗HIS系统\\hisvue\\node_modules\\vue-loader\\lib\\index.js","mtime":1600741754219}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    var _this = this;\n\n    var checkCodeValidate = function checkCodeValidate(rule, value, callback) {\n      var url = \"user/checkCode\";\n      axios.post(url, \"checkCode=\".concat(_this.user.checkCode)).then(function (resp) {\n        if (!resp.data) {\n          callback(new Error(\"验证码输入错误\"));\n        } else {\n          callback();\n        }\n      });\n    };\n\n    return {\n      user: {\n        username: ''\n      },\n      remember: false,\n      rules: {\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: ['blur', 'change']\n        }, {\n          pattern: /^[a-zA-Z0-9_\\u4e00-\\u9fa5\\u3400-\\u4DB5]{2,10}$/,\n          message: '用户名长度在2-10个字符之间'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: ['blur', 'change']\n        }, {\n          min: 4,\n          message: '密码长度至少为4位',\n          trigger: ['blur', 'change']\n        }, {\n          max: 18,\n          message: '密码长度最大为18位',\n          trigger: ['blur', 'change']\n        }],\n        checkCode: [{\n          required: true,\n          message: '请输入验证码',\n          trigger: ['blur', 'change']\n        }, {\n          pattern: /^\\w{4}$/,\n          message: '验证码长度必须为4位'\n        }, {\n          validator: checkCodeValidate,\n          trigger: 'blur'\n        }]\n      },\n      imgurl: 'http://localhost:8089/user/getCode'\n    };\n  },\n  methods: {\n    login: function login() {\n      var _this2 = this;\n\n      this.$refs[\"loginForm\"].validate(function (valid) {\n        if (valid) {\n          var url = \"user/login\";\n          axios.post(url, \"username=\".concat(_this2.user.username, \"&password=\").concat(_this2.user.password, \"&checkCode=\").concat(_this2.user.checkCode)).then(function (resp) {\n            if (resp && resp.data.result == \"ok\") {\n              /* this.$message({\n              \tmessage: \"登陆成功！\",\n              \ttype: \"success\"\n              }); */\n              _this2.$setSessionStorage(\"user\", resp.data.data);\n\n              if (_this2.remember) {\n                _this2.$setLocalStorage(\"username\", _this2.user.username);\n              } else {\n                _this2.$removeLocalStorage(\"username\");\n              }\n\n              _this2.$router.push(\"/mainpage\");\n            }\n          });\n        }\n      });\n    },\n    getCode: function getCode() {\n      this.imgurl = this.imgurl + \"?\" + Math.random();\n    }\n  },\n  created: function created() {\n    if (this.$getLocalStorage(\"username\")) {\n      this.user.username = this.$getLocalStorage(\"username\");\n      this.remember = true;\n    }\n  }\n};",{"version":3,"sources":["login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-form :model=\"user\" :rules=\"rules\" class=\"login-containter\" ref=\"loginForm\">\r\n\t\t\t<h3 class=\"login-title\">系统登录</h3>\r\n\t\t\t<el-form-item prop=\"username\">\r\n\t\t\t\t<el-input type=\"text\" v-model=\"user.username\" placeholder=\"账号\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item prop=\"password\">\r\n\t\t\t\t<el-input type=\"password\" v-model=\"user.password\" placeholder=\"密码\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<div style=\"display: flex;height: 20px;margin-bottom: 10px;\">\r\n\t\t\t\t<img :src=\"imgurl\" /><a href=\"#\" style=\"margin-right: 110px; text-decoration: none;\" @click=\"getCode()\">看不清</a>\r\n\t\t\t\t<el-checkbox class=\"login-remember\" v-model=\"remember\">记住用户名</el-checkbox>\r\n\t\t\t</div>\r\n\t\t\t<el-form-item prop=\"checkCode\">\r\n\t\t\t\t<el-input v-model=\"user.checkCode\" placeholder=\"请输入验证码\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" style=\"width: 100%;\" @click=\"login()\">登录</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\tlet checkCodeValidate = (rule, value, callback) => {\r\n\t\t\t\tlet url = \"user/checkCode\";\r\n\t\t\t\taxios.post(url, `checkCode=${this.user.checkCode}`).then(resp => {\r\n\t\t\t\t\tif (!resp.data) {\r\n\t\t\t\t\t\tcallback(new Error(\"验证码输入错误\"));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\treturn {\r\n\t\t\t\tuser: {\r\n\t\t\t\t\tusername:''\r\n\t\t\t\t},\r\n\t\t\t\tremember: false,\r\n\t\t\t\trules: {\r\n\t\t\t\t\tusername: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: '请输入用户名',\r\n\t\t\t\t\t\t\ttrigger: ['blur', 'change']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpattern: /^[a-zA-Z0-9_\\u4e00-\\u9fa5\\u3400-\\u4DB5]{2,10}$/,\r\n\t\t\t\t\t\t\tmessage: '用户名长度在2-10个字符之间'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tpassword: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: '请输入密码',\r\n\t\t\t\t\t\t\ttrigger: ['blur', 'change']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmin: 4,\r\n\t\t\t\t\t\t\tmessage: '密码长度至少为4位',\r\n\t\t\t\t\t\t\ttrigger: ['blur', 'change']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmax: 18,\r\n\t\t\t\t\t\t\tmessage: '密码长度最大为18位',\r\n\t\t\t\t\t\t\ttrigger: ['blur', 'change']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tcheckCode: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: '请输入验证码',\r\n\t\t\t\t\t\t\ttrigger: ['blur', 'change']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpattern: /^\\w{4}$/,\r\n\t\t\t\t\t\t\tmessage: '验证码长度必须为4位'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvalidator: checkCodeValidate,\r\n\t\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\timgurl: 'http://localhost:8089/user/getCode',\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tlogin() {\r\n\t\t\t\tthis.$refs[\"loginForm\"].validate(valid => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tlet url = \"user/login\";\r\n\t\t\t\t\t\taxios.post(url,\r\n\t\t\t\t\t\t\t`username=${this.user.username}&password=${this.user.password}&checkCode=${this.user.checkCode}`).then(resp => {\r\n\t\t\t\t\t\t\tif (resp && resp.data.result == \"ok\") {\r\n\t\t\t\t\t\t\t\t/* this.$message({\r\n\t\t\t\t\t\t\t\t\tmessage: \"登陆成功！\",\r\n\t\t\t\t\t\t\t\t\ttype: \"success\"\r\n\t\t\t\t\t\t\t\t}); */\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.$setSessionStorage(\"user\",resp.data.data);\r\n\r\n\t\t\t\t\t\t\t\tif (this.remember) {\r\n\t\t\t\t\t\t\t\t\tthis.$setLocalStorage(\"username\", this.user.username);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.$removeLocalStorage(\"username\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.$router.push(\"/mainpage\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\tgetCode() {\r\n\t\t\t\tthis.imgurl = this.imgurl + \"?\" + Math.random();\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tif (this.$getLocalStorage(\"username\")) {\r\n\t\t\t\tthis.user.username = this.$getLocalStorage(\"username\")\r\n\t\t\t\tthis.remember = true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped=\"scoped\">\r\n\t.login-containter {\r\n\t\twidth: 360px;\r\n\t\tmargin: 100px auto 10px auto;\r\n\t\tborder: 1px solid #eaeaea;\r\n\t\tpadding: 35px 35px 15px 35px;\r\n\t\tborder-radius: 15px;\r\n\t\tbox-shadow: 0 0 25px #cac6c6;\r\n\t}\r\n\r\n\t.login-title {\r\n\t\ttext-align: center;\r\n\t\tcolor: #505458;\r\n\t\tmargin: 0px auto 40px auto;\r\n\t}\r\n\r\n\t.login-remember {\r\n\t\tmargin: 0px 0px 35px 0px;\r\n\t}\r\n</style>\n"],"sourceRoot":"src/views"}]}